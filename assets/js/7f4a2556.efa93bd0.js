"use strict";(self.webpackChunkapache_streampark_website=self.webpackChunkapache_streampark_website||[]).push([[6383],{48603:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var r=n(86070),a=n(76113);const o={id:"upgrades",title:"Upgrades",sidebar_position:5},s=void 0,i={id:"get-started/upgrades",title:"Upgrades",description:"1. Download Package",source:"@site/docs/get-started/5.upgrades.md",sourceDirName:"get-started",slug:"/get-started/upgrades",permalink:"/docs/get-started/upgrades",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/streampark-website/edit/dev/docs/get-started/5.upgrades.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{id:"upgrades",title:"Upgrades",sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Installation (Docker)",permalink:"/docs/get-started/installation-docker"},next:{title:"Alert Configuration",permalink:"/docs/platform/alert"}},l={},d=[{value:"1. Download Package",id:"1-download-package",level:2},{value:"2. Execute Upgrade Scripts",id:"2-execute-upgrade-scripts",level:2},{value:"3. Modify Configuration",id:"3-modify-configuration",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"1-download-package",children:"1. Download Package"}),"\n",(0,r.jsxs)(t.p,{children:["If you need to upgrade your StreamPark program, you can directly download the latest installation package from the official website. For example, if you are downloading version ",(0,r.jsx)("u",{children:(0,r.jsx)("font",{color:"blue",children:(0,r.jsx)(t.a,{href:"https://www.apache.org/dyn/closer.lua/incubator/streampark/2.1.5/apache-streampark_2.12-2.1.5-incubating-bin.tar.gz?action=download",children:"2.1.5"})})}),", the download link is: ",(0,r.jsx)("u",{children:(0,r.jsx)("font",{color:"blue",children:(0,r.jsx)(t.a,{href:"https://streampark.apache.org/download/",children:"https://streampark.apache.org/download"})})})]}),"\n",(0,r.jsx)(t.p,{children:"Once the download is complete, extract the package:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"# Extract the streampark installation package.\ntar -zxvf apache-streampark_2.12-2.1.5-incubating-bin.tar.gz\n"})}),"\n",(0,r.jsx)(t.p,{children:"The extracted directory structure will look like this:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-textmate",children:"\u251c\u2500\u2500 bin\n\u2502    \u251c\u2500\u2500 startup.sh                               // Startup script\n\u2502    \u251c\u2500\u2500 shutdown.sh                             // Shutdown script\n\u2502    \u2514\u2500\u2500 ......\n\u251c\u2500\u2500 conf\n\u2502    \u251c\u2500\u2500 config.yaml                             // Project configuration file\n\u2502    \u2514\u2500\u2500 logback-spring.xml                      // Log configuration file\n\u251c\u2500\u2500 lib\n\u2502    \u2514\u2500\u2500 *.jar                                   // Project's JAR files\n\u251c\u2500\u2500 logs                                         // Program log directory\n\u251c\u2500\u2500 script\n\u2502    \u251c\u2500\u2500 data\n\u2502    \u2502   \u251c\u2500\u2500 mysql-data.sql                      // MySQL DDL creation SQL\n\u2502    \u2502   \u2514\u2500\u2500 pgsql-data.sql                      // PostgreSQL DDL creation SQL\n\u2502    \u251c\u2500\u2500 schema\n\u2502    \u2502   \u251c\u2500\u2500 mysql-schema.sql                    // Full initialization data for MySQL\n\u2502    \u2502   \u2514\u2500\u2500 pgsql-schema.sql                    // Full initialization data for PostgreSQL\n\u2502    \u2514\u2500\u2500 upgrade\n\u2502        \u251c\u2500\u2500 mysql\n\u2502        \u2502   \u251c\u2500\u2500 1.2.3.sql                       // SQL to upgrade to version 1.2.3\n\u2502        \u2502   \u251c\u2500\u2500 2.0.0.sql                       // SQL to upgrade to version 2.0.0\n\u2502        \u2502   \u251c\u2500\u2500 2.1.0.sql                       // SQL to upgrade to version 2.1.0\n\u2502        \u2502   \u251c\u2500\u2500 2.1.2.sql                       // SQL to upgrade to version 2.1.2\n\u2502        \u2502   \u251c\u2500\u2500 2.1.3.sql                       // SQL to upgrade to version 2.1.3\n\u2502        \u2502   \u251c\u2500\u2500 2.1.4.sql                       // SQL to upgrade to version 2.1.4\n\u2502        \u2502   \u2514\u2500\u2500 2.1.5.sql                       // SQL to upgrade to version 2.1.5\n\u2502        \u2514\u2500\u2500 pgsql\n\u2502         \u2514\u2500\u2500 ......\n\u2514\u2500\u2500 temp                                          // Temporary path used internally, do not delete\n"})}),"\n",(0,r.jsx)(t.admonition,{title:"Note",type:"note",children:(0,r.jsxs)(t.p,{children:["The upgrade scripts are located in the ",(0,r.jsx)(t.code,{children:"script/upgrade"})," folder."]})}),"\n",(0,r.jsx)(t.h2,{id:"2-execute-upgrade-scripts",children:"2. Execute Upgrade Scripts"}),"\n",(0,r.jsxs)(t.p,{children:["In the ",(0,r.jsx)(t.code,{children:"script/upgrade"})," directory of the extracted installation package, you will see separate upgrade directories for MySQL and PostgreSQL, each containing multiple upgrade scripts."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"......\n\n\u251c\u2500\u2500 script\n\u2502    \u251c\u2500\u2500 data\n\u2502    \u2502   \u251c\u2500\u2500 mysql-data.sql                      // MySQL DDL creation SQL\n\u2502    \u2502   \u2514\u2500\u2500 pgsql-data.sql                      // PostgreSQL DDL creation SQL\n\u2502    \u251c\u2500\u2500 schema\n\u2502    \u2502   \u251c\u2500\u2500 mysql-schema.sql                    // Full initialization data for MySQL\n\u2502    \u2502   \u2514\u2500\u2500 pgsql-schema.sql                    // Full initialization data for PostgreSQL\n\u2502    \u2514\u2500\u2500 upgrade\n\u2502        \u251c\u2500\u2500 mysql\n\u2502        \u2502   \u251c\u2500\u2500 1.2.3.sql                       // SQL to upgrade to version 1.2.3\n\u2502        \u2502   \u251c\u2500\u2500 2.0.0.sql                       // SQL to upgrade to version 2.0.0\n\u2502        \u2502   \u251c\u2500\u2500 2.1.0.sql                       // SQL to upgrade to version 2.1.0\n\u2502        \u2502   \u251c\u2500\u2500 2.1.2.sql                       // SQL to upgrade to version 2.1.2\n\u2502        \u2502   \u251c\u2500\u2500 2.1.3.sql                       // SQL to upgrade to version 2.1.3\n\u2502        \u2502   \u251c\u2500\u2500 2.1.4.sql                       // SQL to upgrade to version 2.1.4\n\u2502        \u2502   \u2514\u2500\u2500 2.1.5.sql                       // SQL to upgrade to version 2.1.5\n\u2502        \u2514\u2500\u2500 pgsql\n\u2502         \u2514\u2500\u2500 ......\n\n......\n"})}),"\n",(0,r.jsx)(t.admonition,{title:"Caution",type:"caution",children:(0,r.jsx)(t.p,{children:"These scripts need to be executed in order, based on the version before the upgrade."})}),"\n",(0,r.jsx)(t.p,{children:"For example, if the program uses an external MySQL database:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["\xb7 If the current version is ",(0,r.jsx)(t.code,{children:"2.1.2"}),", you need to execute the scripts in the following order: ",(0,r.jsx)(t.code,{children:"2.1.3.sql"})," \u2192 ",(0,r.jsx)(t.code,{children:"2.1.4.sql"})," \u2192 ",(0,r.jsx)(t.code,{children:"2.1.5.sql"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["\xb7 If the current version is ",(0,r.jsx)(t.code,{children:"2.1.3"}),", you need to execute ",(0,r.jsx)(t.code,{children:"2.1.4.sql"})," \u2192 ",(0,r.jsx)(t.code,{children:"2.1.5.sql"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["\xb7 If the current version is ",(0,r.jsx)(t.code,{children:"2.1.4"}),", you only need to execute ",(0,r.jsx)(t.code,{children:"2.1.5.sql"}),"."]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"3-modify-configuration",children:"3. Modify Configuration"}),"\n",(0,r.jsxs)(t.p,{children:["Ensure that the latest configuration file (",(0,r.jsx)(t.code,{children:"/conf/config.yaml"}),") is consistent with the historical configuration:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"......\n\n\u251c\u2500\u2500 conf\n\u2502    \u251c\u2500\u2500 config.yaml                             // Project configuration file\n\n......\n"})}),"\n",(0,r.jsx)(t.p,{children:"Finally, start the program to complete the upgrade and update operation!"})]})}function p(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},76113:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>i});var r=n(30758);const a={},o=r.createContext(a);function s(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);